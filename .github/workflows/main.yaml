
# name: React CI/CD Pipeline

# on:
#   push:
#     branches: 
#       - main
#   workflow_dispatch:

# jobs:
#   display:
#     runs-on: ubuntu-latest
#     env:
#       platform: Azure
#       region: central
#       profile_path: profile/

#     steps:
#       # Check out the code
#       - name: Checkout Code
#         if: ${{ env.platform == 'Azure' }} 
#         run: |
#           echo "The platform is ${{ env.platform }}"  # Corrected the typo "platfrom"
#           echo "The region is ${{ env.region }}"  # Corrected to use `${{ env.region }}`





name: React CI/CD Pipeline

on:
  push:
    branches: 
      - main        # Trigger the pipeline on a push to the main branch
  workflow_dispatch:  # Allow the workflow to be triggered manually

jobs:
  display:
    runs-on: ubuntu-latest
    env:
      platform: Azure    # Define environment variable 'platform'
      region: central    # Define environment variable 'region'
      profile_path: profile/  # Define environment variable 'profile_path'

    steps:
      # Step 1: Debug environment variables to ensure they are set correctly
      - name: Debug Environment Variables
        run: |
          echo "Platform: ${{ env.platform }}"
          echo "Region: ${{ env.region }}"
          echo "Profile Path: ${{ env.profile_path }}"

      # Step 2: Checkout the code (conditionally based on platform)
      - name: Checkout Code
        if: ${{ env.platform == 'Azure' }}  # Conditional step based on platform
        run: |
          echo "The platform is ${{ env.platform }}"
          echo "The region is ${{ env.region }}"

      # Step 3: Optional: Add a verification for missing environment variables
      - name: Verify Environment Variables
        run: |
          if [ -z "${{ env.platform }}" ] || [ -z "${{ env.region }}" ]; then
            echo "Error: Missing platform or region environment variable!"
            exit 1
          fi

      # Example: Using profile path
      - name: Use Profile Path
        run: |
          echo "Profile path is ${{ env.profile_path }}"
          # Further steps can utilize profile_path here
